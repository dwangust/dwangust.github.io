{% assign myname = "D. Wang" %}

{% assign groups = "preprint,journal,conference" | split: "," %}
{% assign labels = "Preprints,Journals,Conferences" | split: "," %}

{% for g in groups %}
  {% assign idx = forloop.index0 %}
  {% assign label = labels[idx] %}
  {% assign items = site.data.publications[g] %}

  {% if items and items.size > 0 %}
    <h2 style="margin-top: 1.4em;">{{ label }}</h2>

    <ul style="list-style: none; padding-left: 0;">
      {% for p in items %}
        <li style="margin: 0.6em 0;">

          <!-- 自动编号：按 YAML 顺序 -->
          <span>[{{ forloop.index }}]</span>
          <strong>{{ p.title }}</strong><br/>

          <!-- 自动加粗你的名字 -->
          {% assign author_text = p.authors | replace: myname, "<strong>D. Wang</strong>" %}
          {{ author_text }}<br/>

          <!-- Journal / Conference 斜体，仅 venue 名字 -->
          {% if g == "journal" or g == "conference" %}
            <em>{{ p.venue }}</em>{% if p.year %}, {{ p.year }}{% endif %}
          {% else %}
            {{ p.venue }}{% if p.year %}, {{ p.year }}{% endif %}
          {% endif %}

          {% if p.note and p.note != "" %}
            — {{ p.note }}
          {% endif %}

          {% if p.links and p.links.size > 0 %}
            <span> | </span>
            {% for l in p.links %}
              <a href="{{ l.url }}">{{ l.name }}</a>{% unless forloop.last %} / {% endunless %}
            {% endfor %}
          {% endif %}

        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endfor %}
